# Worker-Pool Demo

Этот проект демонстрирует реализацию простого, но расширяемого пула воркеров на Go с поддержкой динамического масштабирования, безопасным завершением работы и базовым тестовым покрытием.

## Что это такое?

Worker-пул — это компонент, который обрабатывает задачи параллельно, распределяя их между воркерами (горутинами). В этом проекте каждый воркер получает строку из очереди и «обрабатывает» её (для демонстрации — просто пишет в лог). Пул позволяет:

- динамически добавлять и убирать воркеров во время работы,
- безопасно закрывать все воркеры с гарантией, что все задачи будут обработаны.

## Что я реализовал?

Пул воркеров (`workerpool.Pool`), который:
- принимает задачи через метод `Submit()`,
- масштабируется через `Add()` и `Remove()`,
- корректно завершает работу через `Close()`.

Воркеры, которые:
- безопасно завершают работу после закрытия очереди,
- корректно обрабатывают все задачи (не теряют ни одной).

Демонстрационную консольную программу:
- показывает, как отправлять задачи в пул,
- как добавлять/убирать воркеров (по умолчанию — только отправка),
- как безопасно завершать работу с помощью `Ctrl+C`.

Юнит-тесты:
- проверяют, что все задачи доходят до обработки,
- проверяют сценарии добавления/удаления воркеров,
- проверяют graceful shutdown,
- убеждаются, что нет утечек горутин.

## Как запустить приложение?

```bash
make run
````

или

```bash
go run ./cmd/demo/
```

Далее введите текст (одна строка = одна задача), нажмите Enter — задача попадёт в пул и будет обработана воркером. Чтобы завершить работу, нажмите `Ctrl+C` и Enter.

## Как проверить работоспособность?

1. Запустите приложение (см. выше) и убедитесь, что:

   * каждая строка из stdin выводится с указанием номера воркера;
   * после `Ctrl+C` программа завершает все воркеры и выходит без ошибок.

2. Запустите тесты (с проверкой на гонки):

```bash
go test -race ./tests
```

Убедитесь, что все тесты проходят и не возникает предупреждений о гонках.

## Как устроена обработка задач?

* Очередь задач реализована через канал.
* Воркеры забирают задачи из этого канала.
* Пул управляет воркерами и гарантирует безопасное завершение: сначала закрывается канал, затем ждём завершения воркеров.

## Чем этот проект может быть полезен?

Этот проект может быть основой для:

* реализации более сложных worker-пулов (например, с приоритетами или тайм-аутами),
* освоения конкурентного программирования на Go,
* демонстрации навыков написания concurrent-кода и тестирования.
